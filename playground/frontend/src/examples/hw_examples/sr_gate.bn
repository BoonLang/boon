-- SR latch (gate model)
-- Cross-coupled NOR gates create bistable element
-- Boon's reactive dataflow naturally models signal propagation

FUNCTION sr_latch(s, r) {
    BLOCK {
        -- Cross-coupled NOR gates
        -- q = NOR(r, nq)
        -- nq = NOR(s, q)
        -- In reactive Boon, we express the stable state relationship

        q: r |> Bool/not() |> Bool/and(that: nq |> Bool/not())
        nq: s |> Bool/not() |> Bool/and(that: q |> Bool/not())

        [
            q: q
            nq: nq
        ]
    }
}
