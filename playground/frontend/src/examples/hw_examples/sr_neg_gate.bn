-- SR latch with negated inputs (gate model)
-- Cross-coupled NAND gates with active-low inputs
-- Boon's reactive dataflow models signal propagation

FUNCTION sr_neg_latch(ns, nr) {
    BLOCK {
        -- Cross-coupled NAND gates
        -- q = NAND(ns, nq)
        -- nq = NAND(nr, q)

        q: ns |> Bool/and(that: nq) |> Bool/not()
        nq: nr |> Bool/and(that: q) |> Bool/not()

        [
            q: q
            nq: nq
        ]
    }
}
