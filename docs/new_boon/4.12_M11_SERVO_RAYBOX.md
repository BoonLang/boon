# Milestone 11: Boon-Servo-RayBox Desktop App

**Status**: Not Started

## Overview

Create a native desktop application combining Servo (browser engine), RayBox (3D rendering), and boon-console visualizations. This provides a powerful development environment and showcases Boon's capabilities in a standalone app.

---

## Success Criteria

- [ ] Desktop app runs on Linux/macOS/Windows
- [ ] Servo embeds Boon playground
- [ ] RayBox renders 3D visualizations
- [ ] boon-console graph view integrated
- [ ] App is installable (not just browser)
- [ ] Performance comparable to native apps

---

## Dependencies

- **Requires**: M5 (RayBox integration), M10 (boon-console)
- **Enables**: Ultimate developer experience for Boon

---

## Key Features

| Feature | Description |
|---------|-------------|
| Native app | Standalone executable, no browser needed |
| Servo engine | Full web compatibility for Boon |
| RayBox 3D | Physically-based UI rendering |
| Debug panel | Embedded boon-console visualization |
| Live reload | Hot-reload Boon code during development |
| Multi-window | Separate windows for preview, debug, code |

---

## Architecture

```
┌─────────────────────────────────────────────────────────────┐
│                    Desktop Application                       │
│                     (Rust + Servo)                           │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   ┌─────────────────────────────────────────────────────┐   │
│   │              Main Window (Servo)                     │   │
│   │   ┌─────────────────┬───────────────────────────┐   │   │
│   │   │   Code Editor   │      Preview Panel        │   │   │
│   │   │   (CodeMirror)  │   (Boon + RayBox 3D)     │   │   │
│   │   └─────────────────┴───────────────────────────┘   │   │
│   └─────────────────────────────────────────────────────┘   │
│                                                             │
│   ┌─────────────────────────────────────────────────────┐   │
│   │           Debug Window (boon-console)                │   │
│   │   ┌─────────────────┬───────────────────────────┐   │   │
│   │   │  Graph View     │      Event Timeline       │   │   │
│   │   │  (RayBox 3D)    │      (Real-time log)      │   │   │
│   │   └─────────────────┴───────────────────────────┘   │   │
│   └─────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## Servo Integration

| Aspect | Approach |
|--------|----------|
| Embedding | Use servo-embedding crate |
| Boon WASM | Load Boon runtime as WASM in Servo |
| IPC | Servo ↔ native code via custom protocol |
| File access | Native file dialogs, full filesystem |

---

## RayBox Visualizations

| Visualization | Description |
|---------------|-------------|
| 3D Graph | Reactive nodes as 3D objects in space |
| Event particles | Events flow as animated particles |
| Heat map | Color nodes by activity level |
| Exploded view | Spread nodes apart for clarity |
| Camera controls | Orbit, zoom, pan in 3D space |

---

## Development Features

| Feature | Description |
|---------|-------------|
| Project browser | Tree view of .bn files |
| Multi-file editing | Tabs for multiple files |
| Error panel | Compiler errors with line links |
| Console | Log/info output panel |
| Terminal | Embedded terminal for CLI tools |

---

## Distribution

| Platform | Format |
|----------|--------|
| Linux | AppImage, Flatpak, .deb |
| macOS | .app bundle, DMG |
| Windows | .exe installer, MSIX |

---

## Implementation Approach

### Phase 1: Servo Embedding
- Create Rust application with servo-embedding
- Load playground HTML/WASM
- Basic window management

### Phase 2: Native Features
- File dialogs for open/save
- System tray integration
- Keyboard shortcuts

### Phase 3: RayBox Integration
- Replace 2D preview with RayBox 3D
- Add camera controls
- Implement visualization modes

### Phase 4: boon-console
- Add debug panel/window
- Connect to running Boon instance
- 3D graph visualization

### Phase 5: Polish
- Theming (dark/light mode)
- Settings persistence
- Installer creation

---

## Performance Considerations

| Aspect | Approach |
|--------|----------|
| Startup time | Lazy load non-essential features |
| Memory | Share WebGL context between panels |
| GPU | Use wgpu for RayBox, Servo for web content |
| IPC | Minimize Servo ↔ native communication |

---

## Testing Strategy

- Unit tests for native code
- Integration tests with Servo
- Visual regression tests
- Cross-platform CI builds
- Beta testing with real users

---

## Related Documentation

- M5 - RayBox integration in browser
- M8 - kavik.cz uses similar Servo approach
- M10 - boon-console debug protocol
- Servo: https://servo.org/
- RayBox: ~/repos/RayBox
